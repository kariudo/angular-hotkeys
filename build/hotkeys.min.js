/*! 
 * @kariudo/angular-hotkeys v1.8.0
 * https://github.com/kariudo/angular-hotkeys
 * Copyright (c) 2024 [object Object]
 * License: MIT
 */
angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(e){this.includeCheatSheet=!0,this.useNgRoute=e.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(e,a,t,i,n){var o=!0;function l(e,t,n,i,o,a){this.combo=e instanceof Array?e:[e],this.description=t,this.callback=n,this.action=i,this.allowIn=o,this.persistent=a,this._formated=null}Mousetrap.prototype.stopCallback=function(e,t){return!o||!(-1<(" "+t.className+" ").indexOf(" mousetrap "))&&t.contentEditable&&"true"==t.contentEditable},l.prototype.format=function(){if(null===this._formated){for(var e=this.combo[0].split(/[\s]/),t=0;t<e.length;t++)e[t]=(e=>{var t={command:"⌘",shift:"⇧",left:"←",right:"→",up:"↑",down:"↓",return:"⏎",backspace:"⌫"};e=e.split("+");for(var n=0;n<e.length;n++)"mod"===e[n]&&(i.navigator&&0<=i.navigator.platform.indexOf("Mac")?e[n]="command":e[n]="ctrl"),e[n]=t[e[n]]||e[n];return e.join(" + ")})(e[t]);this._formated=e}return this._formated};var s,p=a.$new(),r=(p.hotkeys=[],p.helpVisible=!1,p.title=this.templateTitle,p.header=this.templateHeader,p.footer=this.templateFooter,p.toggleCheatSheet=u,{});function h(){for(var e=p.hotkeys.length;e--;){var t=p.hotkeys[e];t&&!t.persistent&&d(t)}}this.useNgRoute&&a.$on("$routeChangeSuccess",function(e,n){h(),n&&n.hotkeys&&angular.forEach(n.hotkeys,function(e){var t=e[2];("string"==typeof t||t instanceof String)&&(e[2]=[t,n]),e[5]=!1,f.apply(this,e)})}),this.includeCheatSheet&&(n=n[0],e=e[0],s=angular.element(this.template),f(this.cheatSheetHotkey,this.cheatSheetDescription,u),e!==n&&e!==n.documentElement||(e=n.body),angular.element(e).append(t(s)(p)));var c=!1;function u(){p.helpVisible=!p.helpVisible,p.helpVisible?(c=y("esc"),d("esc"),f("esc",c.description,u,null,["INPUT","SELECT","TEXTAREA"])):(d("esc"),!1!==c&&f(c))}function f(e,t,n,i,o,a){var s=["INPUT","SELECT","TEXTAREA"];if("[object Object]"===Object.prototype.toString.call(e)&&(t=e.description,n=e.callback,i=e.action,a=e.persistent,o=e.allowIn,e=e.combo),d(e),t instanceof Function?(i=n,n=t,t="$$undefined$$"):angular.isUndefined(t)&&(t="$$undefined$$"),void 0===a&&(a=!0),"function"==typeof n){var r,h=n;o instanceof Array||(o=[]);for(var c=0;c<o.length;c++)o[c]=o[c].toUpperCase(),-1!==(r=s.indexOf(o[c]))&&s.splice(r,1);n=function(e){var t=!0;if(e){var e=e.target||e.srcElement,n=e.nodeName.toUpperCase();if(-1<(" "+e.className+" ").indexOf(" mousetrap "))t=!0;else for(var i=0;i<s.length;i++)if(s[i]===n){t=!1;break}}t&&k(h.apply(this,arguments))}}"string"==typeof i?Mousetrap.bind(e,k(n),i):Mousetrap.bind(e,k(n));e=new l(e,t,n,i,o,a);return p.hotkeys.push(e),e}function d(e){var t=e instanceof l?e.combo:e;if(Mousetrap.unbind(t),angular.isArray(t)){for(var n=!0,i=t.length;i--;)n=d(t[i])&&n;return n}var o=p.hotkeys.indexOf(y(t));return-1<o&&(1<p.hotkeys[o].combo.length?p.hotkeys[o].combo.splice(p.hotkeys[o].combo.indexOf(t),1):(angular.forEach(r,function(e){var t=e.indexOf(p.hotkeys[o]);-1!==t&&e.splice(t,1)}),p.hotkeys.splice(o,1)),!0)}function y(e){if(!e)return p.hotkeys;for(var t,n=0;n<p.hotkeys.length;n++)if(-1<(t=p.hotkeys[n]).combo.indexOf(e))return t;return!1}function k(o){return function(e,t){var n,i;o instanceof Array&&(n=o[0],i=o[1],o=function(e){i.scope.$eval(n)}),a.$apply(function(){o(e,y(t))})}}return{add:f,del:d,get:y,bindTo:function(t){return t.$id in r||(r[t.$id]=[],t.$on("$destroy",function(){for(var e=r[t.$id].length;e--;)d(r[t.$id].pop())})),{add:function(e){e=1<arguments.length?f.apply(this,arguments):f(e);return r[t.$id].push(e),this}}},template:this.template,toggleCheatSheet:u,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:h,templateTitle:this.templateTitle,pause:function(){o=!1},unpause:function(){o=!0}}}]}]).directive("hotkey",["hotkeys",function(a){return{restrict:"A",link:function(e,t,n){var i,o=[];angular.forEach(e.$eval(n.hotkey),function(e,t){i="string"==typeof n.hotkeyAllowIn?n.hotkeyAllowIn.split(/[\s,]+/):[],o.push(t),a.add({combo:t,description:n.hotkeyDescription,callback:e,action:n.hotkeyAction,allowIn:i})}),t.bind("$destroy",function(){angular.forEach(o,a.del)})}}}]).run(["hotkeys",function(e){}]);